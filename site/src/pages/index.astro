---
import Layout from '../layouts/Layout.astro';
import { readFileSync, existsSync } from 'node:fs';
import { join } from 'node:path';

const manifestPath = join(process.cwd(), 'public', 'manifest.json');
let manifest: { arxo_version?: string; languages?: { id: string; repos: string[] }[]; openclaw_sample?: string } = { languages: [] };
if (existsSync(manifestPath)) {
  try {
    manifest = JSON.parse(readFileSync(manifestPath, 'utf-8'));
  } catch (_) {}
}
const base = import.meta.env.BASE_URL;
---

<Layout title="Arxo Examples & Reports" description="Sample reports and MCP examples for Arxo. Each branch = Arxo version.">
  <div class="space-y-8 sm:space-y-10">
    <div>
      <h1 class="text-2xl font-bold tracking-tight text-slate-900 sm:text-3xl lg:text-4xl">
        Arxo Examples & Reports
      </h1>
      <p class="mt-3 text-base text-slate-600 sm:text-lg">
        Sample reports and MCP request/response examples for Arxo. Use the branch in this repo that matches your Arxo version (e.g. <code class="rounded bg-slate-200 px-1.5 py-0.5 font-mono text-sm text-slate-800">0.1.0-beta.1</code>).
      </p>
    </div>

    <div class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm sm:p-6">
      <h2 class="text-xs font-semibold uppercase tracking-wider text-slate-500">Version</h2>
      <p class="mt-2 flex items-center gap-2">
        <span class="text-slate-600">This branch:</span>
        <span class="inline-flex items-center rounded-md bg-emerald-50 px-2.5 py-1 font-mono text-base font-medium text-emerald-700 ring-1 ring-emerald-600/20 sm:text-lg">
          {manifest.arxo_version ?? 'â€”'}
        </span>
      </p>
    </div>

    <div class="grid gap-4 sm:grid-cols-2 sm:gap-6 lg:grid-cols-3">
      <a href={`${base}reports/`} class="group flex flex-col rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-slate-300 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 sm:p-6">
        <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition group-hover:bg-slate-200">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
        </div>
        <h2 class="mt-4 text-lg font-semibold text-slate-900 group-hover:text-slate-700">Reports</h2>
        <p class="mt-1 text-sm text-slate-600">JSON/HTML reports by language and repository (scc, agent_architecture, openclaw_architecture).</p>
        <span class="mt-4 inline-flex items-center text-sm font-medium text-slate-700 group-hover:text-slate-900">
          Browse reports
          <svg class="ml-1 h-4 w-4 transition group-hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
        </span>
      </a>

      <a href={`${base}mcp/`} class="group flex flex-col rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-slate-300 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 sm:p-6">
        <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition group-hover:bg-slate-200">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg>
        </div>
        <h2 class="mt-4 text-lg font-semibold text-slate-900 group-hover:text-slate-700">MCP Examples</h2>
        <p class="mt-1 text-sm text-slate-600">Human-readable and JSON examples for analyze_architecture, check_cycles, and config tools.</p>
        <span class="mt-4 inline-flex items-center text-sm font-medium text-slate-700 group-hover:text-slate-900">
          Browse MCP examples
          <svg class="ml-1 h-4 w-4 transition group-hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
        </span>
      </a>

      <a href={`${base}samples/`} class="group flex flex-col rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-slate-300 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 sm:p-6">
        <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-slate-100 text-slate-600 transition group-hover:bg-slate-200">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
        </div>
        <h2 class="mt-4 text-lg font-semibold text-slate-900 group-hover:text-slate-700">Samples</h2>
        <p class="mt-1 text-sm text-slate-600">Minimal OpenClaw sample for testing openclaw_architecture.</p>
        <span class="mt-4 inline-flex items-center text-sm font-medium text-slate-700 group-hover:text-slate-900">
          Open samples
          <svg class="ml-1 h-4 w-4 transition group-hover:translate-x-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
        </span>
      </a>
    </div>
  </div>
</Layout>
